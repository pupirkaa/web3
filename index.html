<html>
 <head>
	 <meta charset="utf-8">
	 <title>Калькулятор</title>
	 <script>
		 var Str='';
         var hasResult = false;
         const keyHandlers = {
            '0': () => add(0),
            '1': () => add(1),
            '2': () => add(2),
            '3': () => add(3),
            '4': () => add(4),
            '5': () => add(5),
            '6': () => add(6),
            '7': () => add(7),
            '8': () => add(8),
            '9': () => add(9),
            '+': () => add('+'),
            '-': () => add('-'),
            '%': () => add('%'),
            '*': () => add('*'),
            '=': equal,
            'Backspace': () => {
            	Str = Str.slice(0, Str.length - 1);
                document.getElementById("temp").innerHTML = Str;
            },
            
         };
		 function add(n){
			  Str+=n;
			  document.getElementById("temp").innerHTML = Str;
		  }
		  
		 function equal(){
			  document.getElementById("result").innerHTML = eval(document.getElementById("temp").innerHTML);
              hasResult = true;
		  }
		  
		 function clean(){
			  Str='';
              hasResult = false;
			  document.getElementById("temp").innerHTML  = '';
			  document.getElementById("result").innerHTML = '';
		  }
          
          document.addEventListener('keydown', function(event) {
          	let handler = keyHandlers[event.key];
            if(!handler) {
            	return;
            }
            
            if(hasResult) {
            	clean();
            }
            
            handler();
          });
	 </script>
 </head>
 
		<body>
		
			<table border="1">
			<caption>Калькулятор</caption>
				<tr>
				  <td><button id="plus"     onclick="add('+')"> +  </button> </td>
				  <td><button id="minus"    onclick="add('-')"> −  </button></td>
				  <td><button id="multiply" onclick="add('*')"> x  </button></td>
				</tr>
				<tr>
				  <td><button id="n1"       onclick="add(1)"> 1    </button> </td>
				  <td><button id="n2"       onclick="add(2)"> 2    </button></td>
				  <td><button id="n3"       onclick="add(3)"> 3    </button></td>
				</tr>
				<tr>
					<td><button id="n4"       onclick="add(4)"> 4    </button> </td>
					<td><button id="n5"       onclick="add(5)"> 5    </button></td>
					<td><button id="n6"       onclick="add(6)"> 6    </button></td>
				</tr>
				<tr>
					<td><button id="n7"       onclick="add(7)"> 7    </button> </td>
					<td><button id="n8"       onclick="add(8)"> 8    </button></td>
					<td><button id="n9"       onclick="add(9)"> 9    </button></td>
				</tr>
				<tr>
					<td><button id="div"      onclick="add('/')"> %  </button> </td>
					<td><button id="n0"       onclick="add(0)"> 0    </button></td>
					<td><button id="equal"    onclick="equal()"> =   </button></td>
				</tr>
		  </table>
		  
		  <button id="clean"   onclick="clean()"> Начать заново </button>
		  
		  <p id="temp", style="color:888888; font-size:10px;"> </p>
		  <p id="result">  </p>
          
		  
	 </body>
</html>
